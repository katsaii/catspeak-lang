header:
  - name: "magic number"
    value: 0xC7544E # the colour of Wanda, if you know you know
    type: u32
  - name: "cartridge title"
    value: "CATSPEAK CART"
    type: string
  - name: "cartridge version"
    value: 1
    type: u8

meta-offset: u32
meta:
  - name: "filepath"
    type: string
  #- name: "reg"
  #  many: u32
  - name: "global"
    many: u32
    type: string

func:
  locals: u32
  params: u32

instrs:
  type: u8
  set:

    - name: "const number"
      name-short: "get_n"
      desc: "push a numeric constant onto the stack"
      repr: 0x00
      args:
        - name: "n"
          desc: "the number to emit"
          type: f64
        - name: "location"
          desc: "the approximate location of this instruction in the source code"
          type: u32
          default: CATSPEAK_NOLOCATION

    - name: "const bool"
      name-short: "get_b"
      desc: "push a boolean constant onto the stack"
      repr: 0x01
      args:
        - name: "condition"
          desc: "the bool to emit"
          type: u8
        - name: "location"
          desc: "the approximate location of this instruction in the source code"
          type: u32
          default: CATSPEAK_NOLOCATION

    - name: "const string"
      name-short: "get_s"
      desc: "push a string constant onto the stack"
      repr: 0x02
      args:
        - name: "string_"
          desc: "the string to emit"
          type: string
        - name: "location"
          desc: "the approximate location of this instruction in the source code"
          type: u32
          default: CATSPEAK_NOLOCATION

    - name: "return"
      name-short: "ret"
      desc: "pop the top value off of the stack, and return it from the current function"
      repr: 0x03
      args:
        - name: "location"
          desc: "the approximate location of this instruction in the source code"
          type: u32
          default: CATSPEAK_NOLOCATION
      stackargs:
        - name: "value"
          desc: "the value to return"